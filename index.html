<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>LB</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <div id="app">

    <!-- ‚ïê‚ïê‚ïê LOADING SCREEN ‚ïê‚ïê‚ïê -->
    <div id="loading-screen" class="loading-screen">
      <div class="loading-content">
        <div class="loading-logo-wrap">
          <span class="loading-logo-l">L</span><span class="loading-logo-b">B</span>
        </div>
        <div class="loading-subtitle">Localization Editor</div>
        <div class="loading-dots">
          <span class="loading-dot"></span>
          <span class="loading-dot"></span>
          <span class="loading-dot"></span>
        </div>
        <div class="loading-label">–ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø</div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê WELCOME SCREEN ‚ïê‚ïê‚ïê -->
    <div id="welcome-screen" class="welcome-screen">
      <div class="welcome-inner">

        <div class="welcome-header">
          <h1 class="welcome-title">LB</h1>
          <p class="welcome-subtitle">Localization Editor</p>
        </div>

        <div class="welcome-open-row">
          <button class="welcome-card" id="welcome-open-other">
            <span class="welcome-card-icon">&#x1F4C1;</span>
            <span class="welcome-card-label">–í—ñ–¥–∫—Ä–∏—Ç–∏ —Ç–µ–∫—É</span>
            <span class="welcome-card-hint">.txt —Ñ–∞–π–ª–∏</span>
          </button>
          <button class="welcome-card" id="welcome-open-json">
            <span class="welcome-card-icon">&#x1F4C4;</span>
            <span class="welcome-card-label">–í—ñ–¥–∫—Ä–∏—Ç–∏ JSON</span>
            <span class="welcome-card-hint">–ê–≤—Ç. –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è</span>
          </button>
        </div>

        <div class="welcome-recent-section">
          <h2 class="welcome-section-title">–û—Å—Ç–∞–Ω–Ω—ñ —Ñ–∞–π–ª–∏</h2>
          <div class="welcome-recent-list" id="welcome-recent-list">
            <div class="welcome-empty">–ù–µ–º–∞—î –æ—Å—Ç–∞–Ω–Ω—ñ—Ö —Ñ–∞–π–ª—ñ–≤</div>
          </div>
        </div>

      </div>
    </div>

    <div id="split-container" class="hidden">

      <!-- ‚ïê‚ïê‚ïê LEFT PANEL ‚ïê‚ïê‚ïê -->
      <div id="left-panel">
        <div class="search-box">
          <span class="search-icon">&#x2315;</span>
          <input type="text" id="search-input" placeholder="–§—ñ–ª—å—Ç—Ä –∑–∞–ø–∏—Å—ñ–≤...">
          <button class="search-clear" id="search-clear">&times;</button>
        </div>

        <div id="entry-list-row">
          <div id="entry-list-container">
            <div id="entry-list"></div>
          </div>
          <canvas id="minimap" title="–ú—ñ–Ω—ñ–º–∞–ø–∞"></canvas>
        </div>

        <div id="count-label">–ó–∞–ø–∏—Å—ñ–≤: 0</div>

        <div class="progress-compact">
          <div class="progress-bar-track">
            <div class="progress-bar-fill" id="progress-bar"></div>
          </div>
          <div class="progress-labels">
            <span id="prog-label-entries">&mdash;</span>
            <span class="progress-pct" id="progress-pct">0%</span>
            <span id="prog-label-lines">&mdash;</span>
            <button class="schema-btn" id="schema-btn" title="–°—Ö–µ–º–∞ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É"></button>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê SPLIT HANDLE ‚ïê‚ïê‚ïê -->
      <div id="split-handle"></div>

      <!-- ‚ïê‚ïê‚ïê RIGHT PANEL ‚ïê‚ïê‚ïê -->
      <div id="right-panel">
        <div class="meta-line">
          <span class="meta-file" id="meta-file">&mdash;</span>
          <span class="meta-sep">&middot;</span>
          <span id="meta-text-n">text: &mdash;</span>
          <span class="meta-sep">&middot;</span>
          <span id="meta-sp-n">sp: &mdash;</span>
          <span class="meta-sep meta-chars-sep">&middot;</span>
          <span id="meta-words" class="meta-chars"></span>
          <span class="meta-sep meta-chars-sep">&middot;</span>
          <span id="meta-chars" class="meta-chars" title="–°–∏–º–≤–æ–ª–∏: —É—Å—å–æ–≥–æ / –±–µ–∑ —Ä–æ–∑–º—ñ—Ç–∫–∏"></span>
          <span id="meta-dirty"></span>
          <span class="meta-shortcut-hint" id="meta-hint"></span>
        </div>

        <div class="editor-toolbar" id="editor-toolbar">
          <button class="tb-btn tb-icon-save" id="tb-save" title="–ó–±–µ—Ä–µ–≥—Ç–∏ (Ctrl+S)"></button>
          <button class="tb-btn tb-icon-save-as" id="tb-save-as" title="–ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫... (Ctrl+Shift+S)"></button>
          <span class="tb-sep"></span>
          <button class="tb-btn tb-icon-find" id="tb-find" title="–ó–Ω–∞–π—Ç–∏ (Ctrl+F)"></button>
          <button class="tb-btn tb-icon-replace" id="tb-replace" title="–ó–∞–º—ñ–Ω–∏—Ç–∏ (Ctrl+H)"></button>
          <span class="tb-sep"></span>
          <button class="tb-btn tb-icon-wrap" id="tb-wrap" title="–ê–≤—Ç–æ–ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç—É (Ctrl+Shift+W)"></button>
          <span class="tb-sep"></span>
          <button class="tb-btn tb-icon-migrate" id="tb-migrate" title="–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è"></button>
          <span class="tb-sep"></span>
          <button class="tb-btn tb-icon-show-all" id="tb-show-all" title="–ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ —Å–∏–º–≤–æ–ª–∏"></button>
          <span class="tb-sep"></span>
          <button class="tb-btn tb-icon-undo" id="tb-undo" title="–°–∫–∞—Å—É–≤–∞—Ç–∏ (Ctrl+Z)"></button>
          <button class="tb-btn tb-icon-redo" id="tb-redo" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç–∏ (Ctrl+Y)"></button>
        </div>

        <div id="tab-bar"></div>

        <div id="flat-editor-container">
          <div id="flat-monaco" class="monaco-container"></div>
        </div>

        <div id="split-editor-container" style="display:none;">
          <label class="editor-label">Text</label>
          <div id="text-monaco" class="monaco-container" style="flex:3;"></div>
          <label class="editor-label">Speakers</label>
          <div id="sp-monaco" class="monaco-container" style="flex:1;"></div>
        </div>
      </div>
    </div>

    <!-- Status Bar -->
    <div id="status-bar" class="hidden">
      <span id="status-text">–ì–æ—Ç–æ–≤–æ. Ctrl+O –≤—ñ–¥–∫—Ä–∏—Ç–∏ ¬∑ F1 –∫–ª–∞–≤—ñ—à—ñ</span>
      <span id="status-cursor" class="status-cursor"></span>
      <span id="status-hint">F1 &mdash; –∫–ª–∞–≤—ñ—à—ñ</span>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       MODALS
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

  <!-- Ask / Confirm -->
  <div id="modal-overlay" class="modal-overlay hidden">
    <div id="ask-modal" class="modal hidden">
      <div class="modal-header">
        <h3 id="ask-title">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</h3>
        <button class="modal-close" data-modal-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="ask-text" id="ask-text"></div>
      </div>
      <div class="modal-footer ask-buttons" id="ask-buttons"></div>
    </div>
  </div>

  <!-- Settings -->
  <div id="settings-overlay" class="modal-overlay hidden">
    <div id="settings-modal" class="modal hidden">
      <div class="modal-header">
        <h3>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h3>
        <button class="modal-close" id="settings-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="tab-bar">
          <button class="tab-btn active" data-tab="look">–í–∏–≥–ª—è–¥</button>
          <button class="tab-btn" data-tab="editor">–†–µ–¥–∞–∫—Ç–æ—Ä</button>
          <button class="tab-btn" data-tab="save">–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è</button>
          <button class="tab-btn" data-tab="plugins">–ü–ª–∞–≥—ñ–Ω–∏</button>
          <button class="tab-btn" data-tab="themes">–¢–µ–º–∏</button>
        </div>

        <!-- Tab: –í–∏–≥–ª—è–¥ -->
        <div class="tab-content active" data-tab="look">
          <div class="form-row">
            <label>–¢–µ–º–∞:</label>
            <select id="set-theme">
              <option value="dark">–¢–µ–º–Ω–∞</option>
              <option value="light">–°–≤—ñ—Ç–ª–∞</option>
              <option value="blue-night">–°–∏–Ω—è –Ω—ñ—á</option>
              <option value="green-forest">–ó–µ–ª–µ–Ω–∏–π –ª—ñ—Å</option>
              <option value="warm-amber">–¢–µ–ø–ª–∞ –∞–º–±—Ä–∞</option>
              <option value="rose">–†–æ–∂–µ–≤–∞</option>
              <option value="github-dark">GitHub Dark</option>
              <option value="notepadpp">Notepad++</option>
              <option value="dracula">Dracula</option>
              <option value="alucard">Alucard</option>
              <option value="nier">NieR: Automata</option>
              <option value="nier-replicant">NieR Replicant</option>
            </select>
          </div>
          <div class="form-row">
            <label>–®—Ä–∏—Ñ—Ç:</label>
            <select id="set-font">
              <option>Consolas</option>
              <option>Cascadia Code</option>
              <option>Cascadia Mono</option>
              <option>Courier New</option>
              <option>JetBrains Mono</option>
              <option>Fira Code</option>
              <option>Source Code Pro</option>
              <option>Lucida Console</option>
              <option>DejaVu Sans Mono</option>
              <option>Ubuntu Mono</option>
              <option>Noto Sans Mono</option>
            </select>
          </div>
          <div class="form-row">
            <label>–†–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É:</label>
            <input type="number" id="set-font-size" min="8" max="32" value="11">
            <span style="color:var(--text-muted)">–ø—Ç</span>
          </div>
          <div class="form-row">
            <label>–ü–µ—Ä–µ–Ω–æ—Å —Ä—è–¥–∫—ñ–≤:</label>
            <label><input type="checkbox" id="set-wrap"> –£–≤—ñ–º–∫–Ω–µ–Ω–æ</label>
          </div>
          <div class="form-row">
            <label>–í—ñ–∑—É–∞–ª—å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏:</label>
            <select id="set-visual-fx">
              <option value="full">–ü–æ–≤–Ω—ñ</option>
              <option value="reduced">–ó–º–µ–Ω—à–µ–Ω—ñ</option>
              <option value="minimal">–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ</option>
            </select>
          </div>
          <div class="form-row">
            <label>–†–æ–∑–∫–ª–∞–¥–∫–∞:</label>
            <select id="set-layout">
              <option value="list-left">–°–ø–∏—Å–æ–∫ –ª—ñ–≤–æ—Ä—É—á</option>
              <option value="list-right">–°–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–æ—Ä—É—á</option>
              <option value="list-top">–°–ø–∏—Å–æ–∫ –∑–≤–µ—Ä—Ö—É</option>
              <option value="editor-only">–¢—ñ–ª—å–∫–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä</option>
            </select>
          </div>
          <div class="form-row">
            <label>–ó–∞–∫–ª–∞–¥–∫–∏:</label>
            <label><input type="checkbox" id="set-show-bookmarks" checked> –í—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏</label>
          </div>
        </div>

        <!-- Tab: –†–µ–¥–∞–∫—Ç–æ—Ä -->
        <div class="tab-content" data-tab="editor">
          <div class="form-row">
            <label>–†–æ–∑–¥—ñ–ª—é–≤–∞—á:</label>
            <label><input type="checkbox" id="set-sep-default" checked> –ú—ñ–∂ text / speakers</label>
          </div>
          <div class="form-row">
            <label>–†–µ–∂–∏–º:</label>
            <label><input type="checkbox" id="set-split-default"> –†–æ–∑–¥—ñ–ª—å–Ω–∏–π (Ctrl+T)</label>
          </div>
          <div class="form-row">
            <label>–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è:</label>
            <label><input type="checkbox" id="set-confirm" checked> –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ</label>
          </div>
          <div class="form-row">
            <label>–û—Ä—Ñ–æ–≥—Ä–∞—Ñ—ñ—è:</label>
            <label><input type="checkbox" id="set-spellcheck"> –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ (UA)</label>
          </div>
          <div class="form-row">
            <label>–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è (—Ç–µ–∫–∏):</label>
            <input type="text" id="set-other-ext" placeholder=".txt .json .csv" style="width:180px" title="–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –¥–ª—è —Ä–µ–∂–∏–º—É ¬´–Ü–Ω—à—ñ¬ª (—á–µ—Ä–µ–∑ –ø—Ä–æ–±—ñ–ª)">
          </div>
          <div class="form-row" style="align-items:flex-start">
            <label>–ö–æ–¥–æ–≤—ñ —Å–ª–æ–≤–∞:</label>
            <textarea id="set-code-words" rows="3" style="width:180px;resize:vertical;font-size:11px" placeholder="–û–¥–Ω–µ —Å–ª–æ–≤–æ/—Ñ—Ä–∞–∑–∞ –Ω–∞ —Ä—è–¥–æ–∫" title="–†—è–¥–∫–∏ —â–æ –∑–±—ñ–≥–∞—é—Ç—å—Å—è –∑ –∫–æ–¥–æ–≤–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ —Ä–∞—Ö—É—é—Ç—å—Å—è —è–∫ –ø–µ—Ä–µ–∫–ª–∞–¥–µ–Ω—ñ"></textarea>
          </div>
        </div>

        <!-- Tab: –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è -->
        <div class="tab-content" data-tab="save">
          <div class="form-row">
            <label>–ê–≤—Ç–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:</label>
            <label><input type="checkbox" id="set-autosave"> –£–≤—ñ–º–∫–Ω–µ–Ω–æ</label>
          </div>
          <div class="form-row">
            <label>–Ü–Ω—Ç–µ—Ä–≤–∞–ª (—Å–µ–∫):</label>
            <input type="number" id="set-interval" min="10" value="30">
          </div>
          <div class="form-row">
            <label>–ë–µ–∫–∞–ø:</label>
            <label><input type="checkbox" id="set-backup" checked> .bak –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º</label>
          </div>
          <div class="form-row">
            <label>–ü–µ—Ä—ñ–æ–¥–∏—á–Ω–∏–π –±–µ–∫–∞–ø:</label>
            <label><input type="checkbox" id="set-periodic-backup"> –£–≤—ñ–º–∫–Ω–µ–Ω–æ</label>
          </div>
          <div class="form-row">
            <label>–Ü–Ω—Ç–µ—Ä–≤–∞–ª (—Å–µ–∫):</label>
            <input type="number" id="set-periodic-interval" min="60" value="300">
          </div>
          <div class="power-schedule">
            <div class="power-schedule-header">
              <label>–ì—Ä–∞—Ñ—ñ–∫ —Å–≤—ñ—Ç–ª–∞:</label>
              <div class="power-brush-bar">
                <button class="power-brush active" data-brush="on" title="–Ñ —Å–≤—ñ—Ç–ª–æ">&#x26A1;</button>
                <button class="power-brush" data-brush="off" title="–ù–µ–º–∞—î —Å–≤—ñ—Ç–ª–∞"><span class="power-icon-off">&#x1F4A1;</span></button>
                <button class="power-brush" data-brush="maybe" title="–ú–æ–∂–ª–∏–≤–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è">?</button>
              </div>
            </div>
            <div class="power-days" id="power-days">
              <button class="power-day" data-day="0">–ü–Ω</button>
              <button class="power-day" data-day="1">–í—Ç</button>
              <button class="power-day" data-day="2">–°—Ä</button>
              <button class="power-day" data-day="3">–ß—Ç</button>
              <button class="power-day" data-day="4">–ü—Ç</button>
              <button class="power-day" data-day="5">–°–±</button>
              <button class="power-day" data-day="6">–ù–¥</button>
            </div>
            <div class="power-grid" id="power-grid"></div>
            <div class="power-legend">
              <span class="pl-item"><span class="pl-dot pl-current"></span> –ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Å</span>
              <span class="pl-item"><span class="pl-dot pl-on"></span> —î —Å–≤—ñ—Ç–ª–æ</span>
              <span class="pl-item"><span class="pl-dot pl-off"></span> –Ω–µ–º–∞—î —Å–≤—ñ—Ç–ª–∞</span>
              <span class="pl-item"><span class="pl-dot pl-maybe"></span> –º–æ–∂–ª–∏–≤–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è</span>
            </div>
          </div>
        </div>

        <!-- Tab: –ü–ª–∞–≥—ñ–Ω–∏ -->
        <div class="tab-content" data-tab="plugins">
          <div class="plugin-card">
            <div class="plugin-header">
              <div class="plugin-info">
                <span class="plugin-name">–°–ª–æ–≤–Ω–∏–∫</span>
                <span class="plugin-desc">–ü—ñ–¥—Å–≤—ñ—Ç–∫–∞ —Ç–µ—Ä–º—ñ–Ω—ñ–≤, –ø—ñ–¥–∫–∞–∑–∫–∏ —Ç–∞ –∞–≤—Ç–æ–∑–∞–º—ñ–Ω–∞ –∑—ñ —Å–ª–æ–≤–Ω–∏–∫–∞</span>
              </div>
              <label class="plugin-toggle">
                <input type="checkbox" id="set-plugin-glossary" checked>
                <span class="plugin-toggle-label">–£–≤—ñ–º–∫–Ω–µ–Ω–æ</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Tab: –¢–µ–º–∏ -->
        <div class="tab-content" data-tab="themes">
          <div id="theme-editor-list">
            <div style="margin-bottom:10px">
              <button class="btn-primary" id="theme-create-btn">+ –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ–º—É</button>
            </div>
            <div id="theme-presets-list"></div>
          </div>
          <div id="theme-editor-panel" class="hidden">
            <div class="theme-editor-header">
              <button class="theme-editor-back" id="theme-editor-back">&larr;</button>
              <input type="text" id="theme-editor-name" placeholder="–ù–∞–∑–≤–∞ —Ç–µ–º–∏..." maxlength="40">
              <select id="theme-editor-base">
                <option value="dark">–¢–µ–º–Ω–∞</option>
                <option value="light">–°–≤—ñ—Ç–ª–∞</option>
                <option value="blue-night">–°–∏–Ω—è –Ω—ñ—á</option>
                <option value="green-forest">–ó–µ–ª–µ–Ω–∏–π –ª—ñ—Å</option>
                <option value="warm-amber">–¢–µ–ø–ª–∞ –∞–º–±—Ä–∞</option>
                <option value="rose">–†–æ–∂–µ–≤–∞</option>
                <option value="github-dark">GitHub Dark</option>
                <option value="notepadpp">Notepad++</option>
                <option value="dracula">Dracula</option>
                <option value="alucard">Alucard</option>
                <option value="nier">NieR: Automata</option>
                <option value="nier-replicant">NieR Replicant</option>
              </select>
            </div>
            <div class="theme-editor-groups" id="theme-editor-groups"></div>
            <div class="theme-editor-actions">
              <button class="btn-primary" id="theme-editor-save">–ó–±–µ—Ä–µ–≥—Ç–∏ —Ç–µ–º—É</button>
              <button id="theme-editor-delete" class="hidden">–í–∏–¥–∞–ª–∏—Ç–∏</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-primary" id="settings-save">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button id="settings-cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Glossary -->
  <div id="glossary-overlay" class="modal-overlay hidden">
    <div id="glossary-modal" class="modal hidden">
      <div class="modal-header">
        <h3>–°–ª–æ–≤–Ω–∏–∫</h3>
        <button class="modal-close" id="glossary-close">&times;</button>
      </div>
      <div class="modal-body">
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:10px;">
          <select id="gloss-dict-select" style="flex:1;padding:4px 8px;background:var(--input-bg);color:var(--text);border:1px solid var(--border);border-radius:4px;">
            <option value="global">–ì–ª–æ–±–∞–ª—å–Ω–∏–π —Å–ª–æ–≤–Ω–∏–∫</option>
          </select>
          <button id="gloss-import" style="padding:4px 10px;font-size:12px;white-space:nowrap;" title="–Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑ —ñ–Ω—à–æ–≥–æ —Å–ª–æ–≤–Ω–∏–∫–∞">–Ü–º–ø–æ—Ä—Ç...</button>
        </div>
        <div class="search-box" style="margin-bottom:10px;">
          <span class="search-icon">&#x2315;</span>
          <input type="text" id="gloss-search" placeholder="–ü–æ—à—É–∫ —É —Å–ª–æ–≤–Ω–∏–∫—É...">
        </div>
        <div id="gloss-table-container">
          <table id="gloss-table">
            <thead style="display:none;">
              <tr><th></th><th></th></tr>
            </thead>
            <tbody id="gloss-tbody"></tbody>
          </table>
        </div>
        <div class="gloss-btn-row">
          <button id="gloss-add">+ –î–æ–¥–∞—Ç–∏</button>
          <button id="gloss-delete">–í–∏–¥–∞–ª–∏—Ç–∏</button>
          <span id="gloss-count">0</span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-primary" id="glossary-save">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button id="glossary-cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Diff -->
  <div id="diff-overlay" class="modal-overlay hidden">
    <div id="diff-modal" class="modal hidden">
      <div class="modal-header">
        <h3 id="diff-title">Diff</h3>
        <button class="modal-close" id="diff-close">&times;</button>
      </div>
      <div class="modal-body">
        <div id="diff-content"></div>
      </div>
      <div class="modal-footer">
        <button id="diff-close-btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Compare (side-by-side) -->
  <div id="compare-overlay" class="modal-overlay hidden">
    <div id="compare-modal" class="modal hidden">
      <div class="modal-header">
        <h3 id="compare-title">–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è</h3>
        <div class="compare-nav">
          <button id="compare-prev" title="–ü–æ–ø–µ—Ä–µ–¥–Ω—è –∑–º—ñ–Ω–∞">&uarr;</button>
          <span id="compare-pos">0/0</span>
          <button id="compare-next" title="–ù–∞—Å—Ç—É–ø–Ω–∞ –∑–º—ñ–Ω–∞">&darr;</button>
        </div>
        <button class="modal-close" id="compare-close">&times;</button>
      </div>
      <div class="modal-body" style="padding:0;">
        <div id="compare-panels">
          <div class="compare-panel" id="compare-left">
            <div class="compare-panel-header" id="compare-left-title"></div>
            <div class="compare-panel-content" id="compare-left-content"></div>
          </div>
          <div class="compare-panel" id="compare-right">
            <div class="compare-panel-header" id="compare-right-title"></div>
            <div class="compare-panel-content" id="compare-right-content"></div>
          </div>
        </div>
        <div id="compare-log">
          <div class="compare-log-header" id="compare-log-toggle">–õ–æ–≥ –∑–º—ñ–Ω &#x25BE;</div>
          <div id="compare-log-content"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Migrate (Translation Transfer) -->
  <div id="migrate-overlay" class="modal-overlay hidden">
    <div id="migrate-modal" class="modal hidden">
      <div class="modal-header">
        <h3>–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è</h3>
        <button class="modal-close" id="migrate-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="migrate-slots">
          <div class="migrate-slot" id="migrate-slot-old" data-key="old">
            <div class="migrate-slot-icon">&#x1F4C4;</div>
            <div class="migrate-slot-hint">–ü–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å –∞–±–æ –∫–ª—ñ–∫–Ω—ñ—Ç—å</div>
            <div class="migrate-slot-file" id="migrate-old-file"></div>
            <div class="migrate-slot-label">–°—Ç–∞—Ä–∏–π —Ç–µ–∫—Å—Ç</div>
          </div>
          <div class="migrate-slot" id="migrate-slot-new" data-key="new">
            <div class="migrate-slot-icon">&#x1F4C4;</div>
            <div class="migrate-slot-hint">–ü–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å –∞–±–æ –∫–ª—ñ–∫–Ω—ñ—Ç—å</div>
            <div class="migrate-slot-file" id="migrate-new-file"></div>
            <div class="migrate-slot-label">–ù–æ–≤–∏–π —Ç–µ–∫—Å—Ç</div>
          </div>
          <div class="migrate-slot" id="migrate-slot-ua" data-key="ua">
            <div class="migrate-slot-icon">&#x1F4C4;</div>
            <div class="migrate-slot-hint">–ü–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å –∞–±–æ –∫–ª—ñ–∫–Ω—ñ—Ç—å</div>
            <div class="migrate-slot-file" id="migrate-ua-file"></div>
            <div class="migrate-slot-label">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π —Ç–µ–∫—Å—Ç</div>
          </div>
        </div>
        <div class="migrate-actions">
          <button class="btn-primary" id="migrate-run" disabled>–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏</button>
        </div>
        <div id="migrate-results" class="hidden">
          <div id="migrate-stats"></div>
          <div id="migrate-preview"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-primary hidden" id="migrate-save">–ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
        <button id="migrate-close-btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Info -->
  <div id="info-overlay" class="modal-overlay hidden">
    <div id="info-modal" class="modal hidden">
      <div class="modal-header">
        <h3 id="info-title">–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h3>
        <button class="modal-close" id="info-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="info-text" id="info-text"></div>
      </div>
      <div class="modal-footer">
        <button id="info-close-btn">OK</button>
      </div>
    </div>
  </div>

  <!-- Find Dialog (floating, Notepad++ style) -->
  <div id="find-dialog" class="find-dialog hidden">
    <div class="find-dialog-titlebar" id="find-dialog-titlebar">
      <span class="find-dialog-title" id="find-dialog-title">–ü–æ—à—É–∫</span>
      <button class="find-dialog-close" id="find-dialog-close">&times;</button>
    </div>
    <div class="find-dialog-tabs">
      <button class="find-tab-btn active" data-find-tab="find" id="find-tab-find">–ó–Ω–∞–π—Ç–∏</button>
      <button class="find-tab-btn" data-find-tab="replace" id="find-tab-replace">–ó–∞–º—ñ–Ω–∏—Ç–∏</button>
      <button class="find-tab-btn" data-find-tab="goto" id="find-tab-goto">–†—è–¥–æ–∫</button>
    </div>

    <!-- Tab: –ó–Ω–∞–π—Ç–∏ -->
    <div class="find-tab-content active" data-find-tab="find">
      <div class="find-field-row">
        <label>–©–æ –∑–Ω–∞–π—Ç–∏:</label>
        <div class="find-input-wrapper">
          <input type="text" id="find-input" placeholder="–¢–µ–∫—Å—Ç –¥–ª—è –ø–æ—à—É–∫—É...">
          <button class="find-history-btn" data-history="find" tabindex="-1" title="–Ü—Å—Ç–æ—Ä—ñ—è –ø–æ—à—É–∫—É">&#x25BE;</button>
        </div>
      </div>
      <div class="find-options">
        <label><input type="checkbox" id="find-match-case"> –í—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ —Ä–µ–≥—ñ—Å—Ç—Ä</label>
        <label><input type="checkbox" id="find-whole-words"> –õ–∏—à–µ —Ü—ñ–ª—ñ —Å–ª–æ–≤–∞</label>
        <label><input type="checkbox" id="find-wrap-around" checked> –¶–∏–∫–ª—ñ—á–Ω–∏–π –ø–æ—à—É–∫</label>
      </div>
      <div class="find-mode">
        <label><input type="radio" name="find-mode" value="normal" checked> –ó–≤–∏—á–∞–π–Ω–∏–π</label>
        <label><input type="radio" name="find-mode" value="regex"> –†–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑</label>
      </div>
      <div class="find-regex-hint hidden" id="find-regex-hint">
        <code>.</code> –±—É–¥—å-—è–∫–∏–π &nbsp; <code>\d</code> —Ü–∏—Ñ—Ä–∞ &nbsp; <code>\w</code> —Å–ª–æ–≤–æ &nbsp; <code>.*</code> –±—É–¥—å-—â–æ &nbsp; <code>()</code> –≥—Ä—É–ø–∞ &nbsp; <code>$1</code> –ø—ñ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞
      </div>
      <div class="find-buttons">
        <button class="btn-primary" id="find-next-btn">–ó–Ω–∞–π—Ç–∏ –¥–∞–ª—ñ</button>
        <button id="find-prev-btn">–ó–Ω–∞–π—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π</button>
        <button id="find-count-btn">–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫</button>
        <button id="find-all-btn">–ó–Ω–∞–π—Ç–∏ –≤—Å–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç—ñ</button>
      </div>
      <div class="find-result" id="find-result"></div>
    </div>

    <!-- Tab: –ó–∞–º—ñ–Ω–∏—Ç–∏ -->
    <div class="find-tab-content" data-find-tab="replace">
      <div class="find-field-row">
        <label>–©–æ –∑–Ω–∞–π—Ç–∏:</label>
        <div class="find-input-wrapper">
          <input type="text" id="find-replace-input" placeholder="–¢–µ–∫—Å—Ç –¥–ª—è –ø–æ—à—É–∫—É...">
          <button class="find-history-btn" data-history="find" tabindex="-1" title="–Ü—Å—Ç–æ—Ä—ñ—è –ø–æ—à—É–∫—É">&#x25BE;</button>
        </div>
      </div>
      <div class="find-field-row">
        <label>–ó–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞:</label>
        <div class="find-input-wrapper">
          <input type="text" id="find-replace-with" placeholder="–ó–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞...">
          <button class="find-history-btn" data-history="replace" tabindex="-1" title="–Ü—Å—Ç–æ—Ä—ñ—è –∑–∞–º—ñ–Ω">&#x25BE;</button>
        </div>
      </div>
      <div class="find-options">
        <label><input type="checkbox" id="find-replace-match-case"> –í—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ —Ä–µ–≥—ñ—Å—Ç—Ä</label>
        <label><input type="checkbox" id="find-replace-whole-words"> –õ–∏—à–µ —Ü—ñ–ª—ñ —Å–ª–æ–≤–∞</label>
        <label><input type="checkbox" id="find-replace-wrap-around" checked> –¶–∏–∫–ª—ñ—á–Ω–∏–π –ø–æ—à—É–∫</label>
      </div>
      <div class="find-mode">
        <label><input type="radio" name="find-replace-mode" value="normal" checked> –ó–≤–∏—á–∞–π–Ω–∏–π</label>
        <label><input type="radio" name="find-replace-mode" value="regex"> –†–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑</label>
      </div>
      <div class="find-regex-hint hidden" id="find-replace-regex-hint">
        <code>.</code> –±—É–¥—å-—è–∫–∏–π &nbsp; <code>\d</code> —Ü–∏—Ñ—Ä–∞ &nbsp; <code>\w</code> —Å–ª–æ–≤–æ &nbsp; <code>.*</code> –±—É–¥—å-—â–æ &nbsp; <code>()</code> –≥—Ä—É–ø–∞ &nbsp; <code>$1</code> –ø—ñ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞
      </div>
      <div class="find-replace-scope">
        <label><input type="radio" name="find-replace-scope" value="current" checked> –ü–æ—Ç–æ—á–Ω–∏–π –∑–∞–ø–∏—Å</label>
        <label><input type="radio" name="find-replace-scope" value="all"> –£—Å—ñ –∑–∞–ø–∏—Å–∏</label>
      </div>
      <div class="find-options">
        <label><input type="checkbox" id="find-replace-names-only"> –õ–∏—à–µ —ñ–º–µ–Ω–∞ (—Å–ª–æ–≤–Ω–∏–∫)</label>
      </div>
      <div class="find-buttons">
        <button class="btn-primary" id="find-replace-next-btn">–ó–Ω–∞–π—Ç–∏ –¥–∞–ª—ñ</button>
        <button id="find-replace-one-btn">–ó–∞–º—ñ–Ω–∏—Ç–∏</button>
        <button id="find-replace-all-btn">–ó–∞–º—ñ–Ω–∏—Ç–∏ –≤—Å–µ</button>
      </div>
      <div class="find-result" id="find-replace-result"></div>
    </div>

    <!-- Tab: –†—è–¥–æ–∫ -->
    <div class="find-tab-content" data-find-tab="goto">
      <div class="find-field-row">
        <label>–ù–æ–º–µ—Ä —Ä—è–¥–∫–∞:</label>
        <input type="number" id="goto-line-input" min="1" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥, 2466">
      </div>
      <div class="goto-line-info" id="goto-line-info"></div>
      <div class="find-buttons">
        <button class="btn-primary" id="goto-line-btn">–ü–µ—Ä–µ–π—Ç–∏</button>
      </div>
    </div>

    <!-- Results panel (Find All) -->
    <div id="find-results-panel" class="find-results-panel hidden">
      <div class="find-results-header">
        <span id="find-results-title">–†–µ–∑—É–ª—å—Ç–∞—Ç–∏</span>
        <button class="find-results-close" id="find-results-close">&times;</button>
      </div>
      <div class="find-results-list" id="find-results-list"></div>
    </div>
  </div>

  <!-- Frequent Words Analysis -->
  <div id="freq-overlay" class="modal-overlay hidden">
    <div id="freq-modal" class="modal hidden">
      <div class="modal-header">
        <h3>–ß–∞—Å—Ç—ñ —Å–ª–æ–≤–∞</h3>
        <button class="modal-close" id="freq-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="freq-options">
          <label>–ú—ñ–Ω. –ø–æ–≤—Ç–æ—Ä—ñ–≤: <input type="number" id="freq-min" min="2" value="3" style="width:60px;"></label>
          <label><input type="checkbox" id="freq-case"> –í—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ —Ä–µ–≥—ñ—Å—Ç—Ä</label>
          <label><input type="checkbox" id="freq-whole-line"> –í—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ —Ä—è–¥–æ–∫</label>
          <button id="freq-scan-btn" class="btn-primary">–°–∫–∞–Ω—É–≤–∞—Ç–∏</button>
        </div>
        <div id="freq-result-container" style="max-height:400px; overflow-y:auto; margin-top:10px;">
          <div id="freq-result" style="font-size:12px; color:var(--text-secondary);"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="freq-close-btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Extended Stats -->
  <div id="stats-overlay" class="modal-overlay hidden">
    <div id="stats-modal" class="modal hidden" style="max-width:480px;">
      <div class="modal-header">
        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–∫–ª–∞–¥—É</h3>
        <button class="modal-close" id="stats-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="stats-grid" id="stats-grid">
          <div class="stats-section">
            <div class="stats-section-title">–ó–∞–≥–∞–ª—å–Ω–∞</div>
            <div class="stats-row"><span>–ó–∞–ø–∏—Å—ñ–≤ (—Ñ–∞–π–ª—ñ–≤):</span><span id="st-total-entries" class="stats-val">‚Äî</span></div>
            <div class="stats-row"><span>–†—è–¥–∫—ñ–≤ (–Ω–µ–ø—É—Å—Ç–∏—Ö):</span><span id="st-total-lines" class="stats-val">‚Äî</span></div>
            <div class="stats-row"><span>–°–ª—ñ–≤:</span><span id="st-total-words" class="stats-val">‚Äî</span></div>
            <div class="stats-row"><span>–°–∏–º–≤–æ–ª—ñ–≤:</span><span id="st-total-chars" class="stats-val">‚Äî</span></div>
            <div class="stats-row" style="opacity:0.6"><span>–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∏—Ö (—á–∏—Å–ª–∞, —Ç–µ–≥–∏):</span><span id="st-neutral-lines" class="stats-val">‚Äî</span></div>
          </div>
          <div class="stats-section stats-ua">
            <div class="stats-section-title">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</div>
            <div class="stats-row"><span>–†—è–¥–∫—ñ–≤:</span><span id="st-ua-lines" class="stats-val">‚Äî</span></div>
            <div class="stats-row"><span>–°–ª—ñ–≤:</span><span id="st-ua-words" class="stats-val">‚Äî</span></div>
            <div class="stats-row"><span>–°–∏–º–≤–æ–ª—ñ–≤:</span><span id="st-ua-chars" class="stats-val">‚Äî</span></div>
            <div class="stats-row stats-pct-row"><span>–ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å:</span><span id="st-ua-pct" class="stats-val stats-pct">‚Äî</span></div>
          </div>
          <div class="stats-section stats-en">
            <div class="stats-section-title">üá¨üáß –ê–Ω–≥–ª—ñ–π—Å—å–∫–∞ / –Ü–Ω—à–µ</div>
            <div class="stats-row"><span>–†—è–¥–∫—ñ–≤:</span><span id="st-en-lines" class="stats-val">‚Äî</span></div>
            <div class="stats-row"><span>–°–ª—ñ–≤:</span><span id="st-en-words" class="stats-val">‚Äî</span></div>
            <div class="stats-row"><span>–°–∏–º–≤–æ–ª—ñ–≤:</span><span id="st-en-chars" class="stats-val">‚Äî</span></div>
            <div class="stats-row stats-pct-row"><span>–ó–∞–ª–∏—à–∏–ª–æ—Å—å:</span><span id="st-en-pct" class="stats-val stats-pct-en">‚Äî</span></div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="stats-close-btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Schema Selector -->
  <div id="schema-overlay" class="modal-overlay hidden">
    <div id="schema-modal" class="modal hidden" style="max-width:520px;">
      <div class="modal-header">
        <h3>–°—Ö–µ–º–∞ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É</h3>
        <button class="modal-close" id="schema-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="schema-info" id="schema-info"></div>
        <div class="schema-parse-row">
          <label class="schema-parse-label">–¢–∏–ø –¥–∞–Ω–∏—Ö:</label>
          <select id="schema-parse-type" class="schema-parse-select">
            <option value="auto">–ê–≤—Ç–æ</option>
            <option value="json">JSON</option>
            <option value="xml">XML</option>
            <option value="keyvalue">Key=Value</option>
          </select>
          <button id="schema-reparse-btn" class="schema-reparse-btn" title="–ü–µ—Ä–µ—á–∏—Ç–∞—Ç–∏ –∑ –æ–±—Ä–∞–Ω–∏–º —Ç–∏–ø–æ–º">&#x21bb;</button>
        </div>
        <div class="schema-hint">–û–±–µ—Ä—ñ—Ç—å –ø–æ–ª—è, —è–∫—ñ –º—ñ—Å—Ç—è—Ç—å —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–∫–ª–∞–¥—É:</div>
        <input type="text" id="schema-search" class="schema-search" placeholder="–ü–æ—à—É–∫ –∫–ª—é—á–∞...">
        <div class="schema-tree" id="schema-tree"></div>
      </div>
      <div class="modal-footer" style="gap:8px;">
        <button id="schema-save-btn" class="btn-primary">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button id="schema-reset-btn">–°–∫–∏–Ω—É—Ç–∏</button>
        <button id="schema-close-btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Translator Reference -->
  <div id="ref-overlay" class="modal-overlay hidden">
    <div id="ref-modal" class="modal hidden" style="max-width:620px;">
      <div class="modal-header">
        <h3>–î–æ–≤—ñ–¥–∫–∞ –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á–∞</h3>
        <button class="modal-close" id="ref-close">&times;</button>
      </div>
      <div class="modal-body" style="max-height:70vh; overflow-y:auto; font-size:13px; line-height:1.6;">
        <h4 style="margin:0 0 6px;">–ü—ñ–¥–∫–∞–∑–∫–∏</h4>
        <ul style="margin:0 0 12px; padding-left:20px;">
          <li>–ù–∞–∑–≤–∏ —ñ—Å–Ω—É—é—á–∏—Ö –∫–æ–∫—Ç–µ–π–ª—ñ–≤ ‚Äî —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—î—é —É –ª–∞–ø–∫–∞—Ö ¬´¬ª</li>
          <li>–ù–∞–∑–≤–∏ –∑–∞–∫–ª–∞–¥—ñ–≤ (—Ä–µ—Å—Ç–æ—Ä–∞–Ω–∏, –±–∞—Ä–∏ —Ç–æ—â–æ) ‚Äî —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—è —É –ª–∞–ø–∫–∞—Ö ¬´¬ª</li>
          <li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –ª–∞–ø–∫–∏-—è–ª–∏–Ω–∫–∏ ¬´¬ª –∑–∞–º—ñ—Å—Ç—å –∞–Ω–≥–ª—ñ–π—Å—å–∫–∏—Ö</li>
        </ul>

        <h4 style="margin:0 0 6px;">–ì—Ä–∞—Ñ—ñ—á–Ω—ñ —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è</h4>
        <ul style="margin:0 0 12px; padding-left:20px;">
          <li>–ü—ñ—Å–ª—è —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è —Å—Ç–∞–≤–∏–º–æ –∫—Ä–∞–ø–∫—É. –°–∫–æ—Ä–æ—á—É—î–º–æ –ø—ñ—Å–ª—è –ø—Ä–∏–≥–æ–ª–æ—Å–Ω–æ–≥–æ. –ù–µ —Å–∫–æ—Ä–æ—á—É—î–º–æ –Ω–∞ –≥–æ–ª–æ—Å–Ω–∏–π (–∫—Ä—ñ–º –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ) —ñ –Ω–∞ —å.</li>
          <li>–ó–±—ñ–≥ –æ–¥–Ω–∞–∫–æ–≤–∏—Ö –ø—Ä–∏–≥–æ–ª–æ—Å–Ω–∏—Ö ‚Äî —Å–∫–æ—Ä–æ—á—É—î–º–æ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ: –Ω–∞—Å—Ç—ñ–Ω. –∫–∞–ª–µ–Ω–¥–∞—Ä, –¥–µ–Ω. –Ω–æ—Ä–º–∞</li>
          <li>–ó–±—ñ–≥ —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–∏–≥–æ–ª–æ—Å–Ω–∏—Ö ‚Äî –º–æ–∂–Ω–∞ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –∞–±–æ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ: –≤–ª–∞—Å–Ω–æ—Ä—É—á. –∞–±–æ –≤–ª–∞—Å–Ω–æ—Ä—É—á–Ω., –∞–ª–µ —Ç—ñ–ª—å–∫–∏ –≤–ª–∞—Å—Ç.</li>
        </ul>

        <h4 style="margin:0 0 6px;">–ü–æ—à–∏—Ä–µ–Ω—ñ —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è</h4>
        <div style="columns:2; column-gap:16px; margin-bottom:12px;">
          <div>–∞–≤—Ç. ‚Äî –∞–≤—Ç–æ—Ä; –∞—Ä–∫. ‚Äî –∞—Ä–∫—É—à; –±—ñ–±–ª. ‚Äî –±—ñ–±–ª—ñ–æ—Ç–µ—á–Ω–∏–π</div>
          <div>–±—É–¥. ‚Äî –±—É–¥–∏–Ω–æ–∫; –±—É–ª—å–≤. ‚Äî –±—É–ª—å–≤–∞—Ä; –≤–∏–¥. ‚Äî –≤–∏–¥–∞–Ω–Ω—è</div>
          <div>–≤–∏–ø. ‚Äî –≤–∏–ø—É—Å–∫; –≤—É–ª. ‚Äî –≤—É–ª–∏—Ü—è; –≥—Ä. ‚Äî –≥—Ä–æ–º–∞–¥—è–Ω–∏–Ω</div>
          <div>–¥. ‚Äî –¥–æ–∫—Ç–æ—Ä; –¥–∏–≤. ‚Äî –¥–∏–≤–∏—Å—å; –¥–æ–ª. ‚Äî –¥–æ–ª–∞—Ä</div>
          <div>–¥–æ—Ü. ‚Äî –¥–æ—Ü–µ–Ω—Ç; –∂—É—Ä–Ω. ‚Äî –∂—É—Ä–Ω–∞–ª; –∑–±. ‚Äî –∑–±—ñ—Ä–Ω–∏–∫</div>
          <div>—ñ–º. ‚Äî —ñ–º–µ–Ω—ñ; —ñ–Ω. ‚Äî —ñ–Ω—à—ñ; –∫–≤. ‚Äî –∫–≤–∞—Ä—Ç–∏—Ä–∞</div>
          <div>–º. ‚Äî –º—ñ—Å—Ç–æ; –Ω–∞–ø—Ä. ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥; –Ω–∞—Ü. ‚Äî –Ω–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π</div>
          <div>–Ω. –µ. ‚Äî –Ω–∞—à–æ—ó –µ—Ä–∏; –æ–±–ª. ‚Äî –æ–±–ª–∞—Å—Ç—å; –ø–ª. ‚Äî –ø–ª–æ—â–∞</div>
          <div>–ø—Ä–æ—Ñ. ‚Äî –ø—Ä–æ—Ñ–µ—Å–æ—Ä; —Ä. ‚Äî —Ä—ñ–∫; —Ä–µ–¥. ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä</div>
          <div>—Å. ‚Äî —Å–µ–ª–æ/—Å—Ç–æ—Ä—ñ–Ω–∫–∞; —Å–≤. ‚Äî —Å–≤—è—Ç–∏–π; —Å—Ç. ‚Äî —Å—Ç–∞–Ω—Ü—ñ—è/—Å—Ç–∞—Ç—Ç—è</div>
          <div>—Ç. ‚Äî —Ç–æ–º; —Ç–∏—Å. ‚Äî —Ç–∏—Å—è—á–∞; —É–∫—Ä. ‚Äî —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π</div>
          <div>—ñ —Ç. –¥. ‚Äî —ñ —Ç–∞–∫ –¥–∞–ª—ñ; —ñ —Ç. —ñ–Ω. ‚Äî —ñ —Ç–∞–∫–µ —ñ–Ω—à–µ</div>
          <div>—Ç. –∑–≤. ‚Äî —Ç–∞–∫ –∑–≤–∞–Ω–∏–π; —É —Ç. —á. ‚Äî —É —Ç–æ–º—É —á–∏—Å–ª—ñ</div>
        </div>

        <h4 style="margin:0 0 6px;">–û–¥–∏–Ω–∏—Ü—ñ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è (–±–µ–∑ –∫—Ä–∞–ø–æ–∫)</h4>
        <div style="margin-bottom:12px;">
          –≥, –∫–≥, —Ç, –º, —Å–º, –º–º, –∫–º, –¥–º, –≥–∞, –ª, –í—Ç, –∫–í—Ç, –ë, –∫–ë, –≥—Ä–Ω, –º–ª–Ω, –º–ª—Ä–¥, —Ç—Ä–ª–Ω, —Å–º—Ç
        </div>

        <h4 style="margin:0 0 6px;">–î–µ—Ñ—ñ—Å —ñ —Å–∫—ñ—Å–Ω–∞ —Ä–∏—Å–∫–∞</h4>
        <ul style="margin:0; padding-left:20px;">
          <li>–ü—Ä–æ–ø—É—â–µ–Ω–∞ —Å–µ—Ä–µ–¥–∏–Ω–∞ ‚Äî –¥–µ—Ñ—ñ—Å –±–µ–∑ –∫—Ä–∞–ø–∫–∏: –≥—Ä-–Ω, –≤–∏–¥-–≤–æ, —ñ–Ω-—Ç, —É–Ω-—Ç, —Ä-–Ω</li>
          <li>–°–∫–ª–∞–¥–Ω—ñ —Å–ª–æ–≤–∞ ‚Äî –±—É–∫–≤–∏ —á–∞—Å—Ç–∏–Ω –∑ –∫—Ä–∞–ø–∫–æ—é: —Å.-–¥., —Å.-–≥., —Å—Ç.-—Å–ª., –ø—ñ–≤–Ω.-—Å—Ö.</li>
          <li>–°–∫—ñ—Å–Ω–∞ —Ä–∏—Å–∫–∞ –±–µ–∑ –∫—Ä–∞–ø–æ–∫: –ø/–≤, –∞/—Å, —Ä/—Ä, –∫–º/–≥–æ–¥, –º/—Ö–≤</li>
        </ul>
      </div>
      <div class="modal-footer">
        <button id="ref-close-btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Progress Sync -->
  <div id="progress-overlay" class="modal-overlay hidden">
    <div id="progress-modal" class="modal hidden" style="max-width:520px;">
      <div class="modal-header">
        <h3>–û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å –Ω–∞ —Å–∞–π—Ç—ñ</h3>
        <button class="modal-close" id="progress-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <label>–§–∞–π–ª games.ts:</label>
          <div style="display:flex;gap:6px;flex:1;">
            <input type="text" id="progress-games-path" style="flex:1;font-size:11px;" readonly>
            <button id="progress-browse-btn" style="white-space:nowrap;">–û–≥–ª—è–¥...</button>
          </div>
        </div>
        <div class="form-row">
          <label>–ì—Ä–∞:</label>
          <select id="progress-game-select" style="flex:1;">
            <option value="">‚Äî –æ–±–µ—Ä—ñ—Ç—å –≥—Ä—É ‚Äî</option>
          </select>
        </div>
        <div class="progress-sync-stats" id="progress-sync-stats">
          <div class="progress-sync-row">
            <span class="progress-sync-label">–†—è–¥–∫—ñ–≤ —É—Å—å–æ–≥–æ:</span>
            <span class="progress-sync-value" id="ps-total-lines">‚Äî</span>
          </div>
          <div class="progress-sync-row">
            <span class="progress-sync-label">–ü–µ—Ä–µ–∫–ª–∞–¥–µ–Ω–æ (–∫–∏—Ä–∏–ª–∏—Ü—è):</span>
            <span class="progress-sync-value" id="ps-translated-lines">‚Äî</span>
          </div>
          <div class="progress-sync-row">
            <span class="progress-sync-label">–ü—Ä–æ–≥—Ä–µ—Å:</span>
            <span class="progress-sync-value progress-sync-pct" id="ps-progress">‚Äî</span>
          </div>
          <div class="progress-sync-row">
            <span class="progress-sync-label">–°–∏–º–≤–æ–ª—ñ–≤:</span>
            <span class="progress-sync-value" id="ps-total-chars">‚Äî</span>
          </div>
        </div>
        <div class="progress-sync-current" id="progress-sync-current"></div>
        <div class="replace-result" id="progress-result"></div>
      </div>
      <div class="modal-footer">
        <button class="btn-primary" id="progress-update-btn">–û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å</button>
        <button id="progress-cancel">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Auto Wrap Tool -->
  <div id="wrap-overlay" class="modal-overlay hidden">
    <div id="wrap-modal" class="modal hidden">
      <div class="modal-header">
        <h3>–ê–≤—Ç–æ–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É</h3>
        <button class="modal-close" id="wrap-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <label>–°–∏–º–≤–æ–ª –ø–µ—Ä–µ–Ω–æ—Å—É:</label>
          <input type="text" id="wrap-break-char" value="\n" style="width:120px;" placeholder="\n">
          <span style="color:var(--text-muted);font-size:11px;margin-left:6px;">\n, &lt;br&gt;, –∞–±–æ —ñ–Ω—à–∏–π</span>
        </div>
        <div class="form-row">
          <label>–ú–∞–∫—Å. —Å–∏–º–≤–æ–ª—ñ–≤ —É —Ä—è–¥–∫—É:</label>
          <input type="number" id="wrap-line-width" min="10" max="500" value="40" style="width:80px;">
        </div>
        <div class="form-row">
          <label>–û–±–ª–∞—Å—Ç—å:</label>
          <div class="wrap-scope">
            <label><input type="radio" name="wrap-scope" value="current" checked> –ü–æ—Ç–æ—á–Ω–∏–π –∑–∞–ø–∏—Å</label>
            <label><input type="radio" name="wrap-scope" value="all"> –£—Å—ñ –∑–∞–ø–∏—Å–∏</label>
          </div>
        </div>
        <div class="wrap-preview" id="wrap-preview">
          <div class="wrap-preview-label">–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥:</div>
          <pre class="wrap-preview-text" id="wrap-preview-text"></pre>
        </div>
        <div class="replace-result" id="wrap-result"></div>
      </div>
      <div class="modal-footer">
        <button class="btn-primary" id="wrap-apply-btn">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏</button>
        <button id="wrap-preview-btn">–û–Ω–æ–≤–∏—Ç–∏ –ø–µ—Ä–µ–≥–ª—è–¥</button>
        <button id="wrap-cancel">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Power outage warning overlay -->
  <div id="power-warning-overlay" class="power-warning-overlay hidden">
    <div class="power-warning-panel">
      <div class="power-warning-icon">&#x26A1;</div>
      <h2 class="power-warning-title">–£–≤–∞–≥–∞!</h2>
      <p class="power-warning-text">
        –ó–∞—Ä–∞–∑ <span id="power-warning-time"></span> ‚Äî –æ—Ç-–æ—Ç –º–æ–∂–ª–∏–≤–æ –º–∞—é—Ç—å –≤–∏–º–∫–Ω—É—Ç–∏ —Å–≤—ñ—Ç–ª–æ.<br>
        –£—Å—ñ –∑–º—ñ–Ω–∏ —â–æ–π–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.<br><br>
        –†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –≤–∏–º–∫–Ω—É—Ç–∏ –ø—Ä–∏—Å—Ç—Ä—ñ–π –¥–ª—è –±–µ–∑–ø–µ–∫–∏.
      </p>
      <button class="btn-primary" id="power-warning-dismiss">–ó—Ä–æ–∑—É–º—ñ–ª–æ</button>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê BOOKMARKS PANEL ‚ïê‚ïê‚ïê -->
  <div id="bookmarks-overlay" class="modal-overlay hidden">
    <div id="bookmarks-modal" class="modal hidden" style="max-width:520px">
      <div class="modal-header">
        <h3>–ó–∞–∫–ª–∞–¥–∫–∏</h3>
        <button class="modal-close" id="bookmarks-close">&times;</button>
      </div>
      <div class="modal-body" style="padding:0">
        <div id="bookmarks-list" class="bookmarks-list"></div>
      </div>
      <div class="modal-footer">
        <button id="bookmarks-clear-all">–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å–µ</button>
        <button id="bookmarks-close-btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê HISTORY PANEL ‚ïê‚ïê‚ïê -->
  <div id="history-overlay" class="modal-overlay hidden">
    <div id="history-modal" class="modal hidden" style="max-width:560px">
      <div class="modal-header">
        <span>–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω</span>
        <span class="modal-header-sub" id="history-entry-label"></span>
        <button class="modal-close" id="history-close">&times;</button>
      </div>
      <div class="modal-body" style="padding:0">
        <div id="history-list" class="history-list"></div>
        <div id="history-empty" class="hidden" style="text-align:center;padding:40px;color:var(--text-secondary)">–ó–º—ñ–Ω —â–µ –Ω–µ –±—É–ª–æ</div>
      </div>
      <div class="modal-footer">
        <button id="history-clear-btn" class="btn-secondary">–û—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é</button>
        <button id="history-close-btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê COMMAND PALETTE ‚ïê‚ïê‚ïê -->
  <div id="cmd-palette-overlay" class="cmd-palette-overlay hidden">
    <div id="cmd-palette" class="cmd-palette">
      <input type="text" id="cmd-input" class="cmd-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É...">
      <div id="cmd-results" class="cmd-results"></div>
    </div>
  </div>

  <!-- Entry context menu -->
  <div id="entry-context-menu" class="entry-context-menu hidden">
    <div class="ctx-item ctx-translated" id="ctx-translated">
      <span class="ctx-dot ctx-dot-translated"></span> –ü–µ—Ä–µ–∫–ª–∞–¥–µ–Ω–æ
    </div>
    <div class="ctx-item ctx-edited" id="ctx-edited">
      <span class="ctx-dot ctx-dot-edited"></span> –ó—Ä–µ–¥–∞–≥–æ–≤–∞–Ω–æ
    </div>
    <div class="ctx-sep"></div>
    <div class="ctx-item" id="ctx-note">–ü—Ä–∏–º—ñ—Ç–∫–∞&#x2026;</div>
    <div class="ctx-sep"></div>
    <div class="ctx-item ctx-clear" id="ctx-clear-tag">–ó–Ω—è—Ç–∏ –≤—Å–µ</div>
    <div class="ctx-sep"></div>
    <div class="ctx-item" id="ctx-bookmark"><span class="ctx-dot ctx-dot-bookmark"></span> –ó–∞–∫–ª–∞–¥–∫–∞</div>
    <div class="ctx-item" id="ctx-entry-history">–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω&#x2026;</div>
    <div class="ctx-sep" id="ctx-compare-sep"></div>
    <div class="ctx-item" id="ctx-compare">–ü–æ—Ä—ñ–≤–Ω—è—Ç–∏&#x2026;</div>
    <div class="ctx-item hidden" id="ctx-compare-cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è</div>
    <div class="ctx-sep hidden" id="ctx-remove-sep"></div>
    <div class="ctx-item ctx-danger hidden" id="ctx-remove-entry">–í–∏–¥–∞–ª–∏—Ç–∏ –∑—ñ —Å–ø–∏—Å–∫—É</div>
  </div>

  <!-- Note prompt mini-dialog -->
  <div id="note-prompt-overlay" class="note-prompt-overlay hidden">
    <div class="note-prompt">
      <div class="note-prompt-title">–ü—Ä–∏–º—ñ—Ç–∫–∞</div>
      <input type="text" id="note-prompt-input" placeholder="–ù–∞–ø—Ä.: –°—É–±—Ç–∏—Ç—Ä–∏, –í—ñ–¥–µ–æ—Ä–æ–ª–∏–∫–∏..." maxlength="60">
      <div class="note-prompt-buttons">
        <button class="btn-primary" id="note-prompt-ok">OK</button>
        <button id="note-prompt-cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
      </div>
    </div>
  </div>

  <!-- Shortcuts overlay (F1) -->

  <!-- Glossary tooltip -->
  <div id="gloss-tooltip" class="gloss-tooltip hidden"></div>

  <!-- Glossary cloud (click on highlighted term) -->
  <div id="gloss-cloud" class="gloss-cloud hidden">
    <div class="gloss-cloud-orig" id="gloss-cloud-orig"></div>
    <div class="gloss-cloud-trans" id="gloss-cloud-trans"></div>
    <div class="gloss-cloud-actions">
      <button class="btn-primary btn-sm" id="gloss-cloud-replace">–ó–∞–º—ñ–Ω–∏—Ç–∏</button>
      <button class="btn-sm" id="gloss-cloud-close">&times;</button>
    </div>
  </div>

  <!-- Add to glossary popup -->
  <div id="add-gloss-popup" class="add-gloss-popup hidden">
    <div class="add-gloss-header" id="add-gloss-orig-text"></div>
    <input type="text" id="add-gloss-trans-input" placeholder="–ü–µ—Ä–µ–∫–ª–∞–¥ (UA)...">
    <div class="add-gloss-actions">
      <button class="btn-primary" id="add-gloss-confirm">–î–æ–¥–∞—Ç–∏</button>
      <button id="add-gloss-dismiss">&times;</button>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
